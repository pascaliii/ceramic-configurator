/*
Auto-generated by: https://github.com/pmndrs/gltfjsx
Command: npx gltfjsx@6.2.13 Model_Cup_2023_09_03.gltf -o Transformed_Model_Cup_2023_09_03 
*/

import React, { useEffect, useRef, useState } from 'react'
import { meshBounds, useGLTF } from '@react-three/drei'
import { useLoader } from '@react-three/fiber'
import * as THREE from 'three'
import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader'
import clays from '../data/clays'
import mattGlazes from '../data/mattGlazes'
import shinyGlazes from '../data/shinyGlazes'

export function Cup({ clay, glaze, glazePart }) {
  const { nodes, materials } = useGLTF('./models/Cup.gltf')

  const findSelectedGlaze = () => {
    let glazeMaterial
    if (mattGlazes.find((item) => item.value === glaze)) {
      glazeMaterial = mattGlazes.find((item) => item.value === glaze)
      return glazeMaterial
    }
    if (shinyGlazes.find((item) => item.value === glaze)) {
      glazeMaterial = shinyGlazes.find((item) => item.value === glaze)
      return glazeMaterial
    }
  }

  const findSelectedClay = () => {
    const clayMaterial = clays.find((item) => item.value === clay)
    return clayMaterial
  }

  const renderCup = () => {
    const clayMaterial = findSelectedClay()
    const glazeMaterial = findSelectedGlaze()
    let material

    if (clay === 'Basic Beige') {
      material = materials[glazeMaterial?.basic]
      clay = materials[clayMaterial?.basic]
    } else {
      material = materials[glazeMaterial?.spreckled]
      clay = materials[clayMaterial?.spreckled]
    }

    switch (glazePart) {
      case 'Completely glazed':

        return (
          <>
            <mesh
              geometry={nodes.CupBase.geometry}
              material={clay ?? materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupInner.geometry}
              material={material ?? materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupTop.geometry}
              material={material ?? materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupMiddle.geometry}
              material={material ?? materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupBottom.geometry}
              material={material ?? materials.Clay_Beige}
            />
          </>
        )

        break

      case 'Half glazed':

        return (
          <>
            <mesh
              geometry={nodes.CupBase.geometry}
              material={clay ?? materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupInner.geometry}
              material={material ?? materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupTop.geometry}
              material={material ?? materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupMiddle.geometry}
              material={material ?? materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupBottom.geometry}
              material={clay ?? materials.Clay_Beige}
            />
          </>
        )
        break

      case 'Only glazed inside':

        return (
          <>
            <mesh
              geometry={nodes.CupBase.geometry}
              material={clay ?? materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupInner.geometry}
              material={material ?? materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupTop.geometry}
              material={clay ?? materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupMiddle.geometry}
              material={clay ?? materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupBottom.geometry}
              material={clay ?? materials.Clay_Beige}
            />
          </>
        )

        break

      case 'No glaze selected':

        return (
          <>
            <mesh
              geometry={nodes.CupBase.geometry}
              material={clay ?? materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupInner.geometry}
              material={clay ?? materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupTop.geometry}
              material={clay ?? materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupMiddle.geometry}
              material={clay ?? materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupBottom.geometry}
              material={clay ?? materials.Clay_Beige}
            />
          </>
        )

        break

      default:
        return (
          <>
            <mesh
              geometry={nodes.CupBase.geometry}
              material={materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupInner.geometry}
              material={materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupTop.geometry}
              material={materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupMiddle.geometry}
              material={materials.Clay_Beige}
            />
            <mesh
              geometry={nodes.CupBottom.geometry}
              material={materials.Clay_Beige}
            />
          </>
        )
        break
    }
  }

  return <group dispose={null}>{renderCup()}</group>
}

useLoader.preload(
  GLTFLoader,
  './models/Cup.gltf' /* extensions */
)
